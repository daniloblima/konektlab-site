---
phase: 01-implementacao
plan: "03"
type: execute
wave: 2
depends_on:
  - "01-01"
  - "01-02"
files_modified:
  - css/style.css
  - js/main.js
autonomous: true
requirements:
  - DESIGN-04
  - DESIGN-05
  - INTER-01
  - INTER-02
  - INTER-03
  - INTER-04
  - INTER-05
  - INTER-06

must_haves:
  truths:
    - "Cards de serviço têm estrutura visual com nome + descrição destacados"
    - "Cards de evidência têm estrutura visual situação → resultado claramente diferenciada"
    - "CTA 'Agende uma conversa' abre o link Google Calendar com UTM correto para cada posição"
    - "Link do CTA está centralizado em variável JS — uma mudança afeta todos"
    - "Animações de scroll reveal (fade-in) funcionam sem travar ou piscar"
    - "Hover states aplicados nos CTAs e cards de serviço"
    - "Clicar nos links âncora faz scroll suave"
  artifacts:
    - path: "css/style.css"
      provides: "Estilos de cards de serviço, cards de evidência e animações"
      contains: ".card-servico"
    - path: "js/main.js"
      provides: "CTA links com UTM, scroll reveal, smooth scroll"
      contains: "const CTA_BASE_URL"
  key_links:
    - from: "js/main.js"
      to: "#cta-hero"
      via: "document.getElementById('cta-hero').href"
      pattern: "cta-hero"
    - from: "js/main.js"
      to: "#cta-servicos"
      via: "document.getElementById('cta-servicos').href"
      pattern: "cta-servicos"
    - from: "js/main.js"
      to: "#cta-final-btn"
      via: "document.getElementById('cta-final-btn').href"
      pattern: "cta-final"
    - from: "css/style.css .reveal"
      to: "js/main.js IntersectionObserver"
      via: "JS adiciona classe .is-visible aos elementos .reveal"
      pattern: "is-visible|IntersectionObserver"
---

<objective>
Implementar os componentes visuais (cards de serviço e evidências) e todas as interações JS (CTAs com UTM, scroll reveal, hover states).

Purpose: Wave 2 — constrói sobre a fundação do HTML e CSS base. Completa o visual e a interatividade da página.
Output: cards.css appended a style.css, js/main.js com todas as interações.
</objective>

<execution_context>
@/Users/daniloblima/.claude/get-shit-done/workflows/execute-plan.md
@/Users/daniloblima/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-implementacao/CONTEXT.md
@.planning/phases/01-implementacao/01-01-SUMMARY.md
@.planning/phases/01-implementacao/01-02-SUMMARY.md
@COPY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Estilos de cards de serviço, evidências e seção "como funciona"</name>
  <files>css/style.css</files>
  <action>
    Adicionar ao final de css/style.css os estilos de componentes (não substituir, APPEND):

    **Grid de cards:**
    ```css
    /* === CARDS GRID === */
    .cards-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-4);
    }
    ```

    **Cards de serviço (DESIGN-04):**
    ```css
    /* === CARDS DE SERVIÇO === */
    .card-servico {
      background-color: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--border-radius-lg);
      padding: var(--space-6);
      transition: transform var(--transition-base), box-shadow var(--transition-base);
    }

    .card-servico:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
    }

    .card-servico h3 {
      font-size: var(--font-size-xl);
      font-weight: 600;
      margin-bottom: var(--space-2);
      letter-spacing: -0.02em;
    }

    .card-servico p {
      font-size: var(--font-size-base);
      line-height: var(--line-height-relaxed);
      color: var(--color-text-muted);
      margin-bottom: 0;
    }
    ```

    **Cards de evidência (DESIGN-05) — estrutura situação → resultado:**
    ```css
    /* === CARDS DE EVIDÊNCIA === */
    .card-evidencia {
      background-color: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--border-radius-lg);
      padding: var(--space-6);
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
    }

    .card-evidencia h3 {
      font-size: var(--font-size-base);
      font-weight: 600;
      color: var(--color-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-size: var(--font-size-xs);
      margin-bottom: 0;
    }

    .card-evidencia .situacao {
      font-size: var(--font-size-base);
      line-height: var(--line-height-relaxed);
      color: var(--color-text-muted);
      margin-bottom: 0;
      padding-bottom: var(--space-3);
      border-bottom: 1px solid var(--color-border);
    }

    .card-evidencia .resultado {
      font-size: var(--font-size-base);
      line-height: var(--line-height-relaxed);
      color: var(--color-text);
      font-weight: 500;
      margin-bottom: 0;
    }
    ```

    **Seção serviços — fundo diferente para alternar:**
    ```css
    .servicos {
      background-color: var(--color-bg);
    }

    .evidencias {
      background-color: var(--color-surface);
    }
    ```

    **Animação de scroll reveal (INTER-04):**
    ```css
    /* === SCROLL REVEAL === */
    .reveal {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }

    .reveal.is-visible {
      opacity: 1;
      transform: translateY(0);
    }
    ```

    **Seção "sobre" no desktop — layout lado a lado:**
    ```css
    /* Desktop: foto ao lado da bio */
    @media (min-width: 640px) {
      .sobre-content {
        flex-direction: row;
        align-items: flex-start;
      }

      .foto-placeholder {
        width: 200px;
        height: 200px;
      }
    }
    ```

    Verificar que o HTML do index.html tem os containers corretos. Se o Plan 01 não tiver adicionado `<div class="container">` dentro de cada section, adicionar agora ao index.html para que o CSS funcione corretamente. Estrutura esperada:
    ```html
    <section id="servicos" class="servicos">
      <div class="container container--wide">
        <h2>Serviços</h2>
        <div class="cards-grid">
          <article class="card-servico">...</article>
        </div>
        <a href="#" class="cta-btn" id="cta-servicos" target="_blank" rel="noopener">Agende uma conversa</a>
      </div>
    </section>
    ```
  </action>
  <verify>
    Abrir index.html no browser. Verificar:
    1. Cards de serviço aparecem com borda, padding e título em destaque
    2. Cards de evidência mostram separação visual entre situação (texto cinza) e resultado (texto escuro, bold)
    3. Efeito hover nos cards: leve elevação (translateY)
    4. grep "card-servico" css/style.css retorna linhas
  </verify>
  <done>Cards de serviço e evidências renderizam com hierarquia visual clara. Hover nos cards funciona. Animação .reveal/.is-visible definida no CSS.</done>
</task>

<task type="auto">
  <name>Task 2: JavaScript — CTAs com UTM, scroll reveal e smooth scroll</name>
  <files>js/main.js</files>
  <action>
    Escrever js/main.js completo com as seguintes funcionalidades:

    **1. Variável central do link CTA (INTER-02):**
    ```javascript
    /* konekt.lab — Main JS */

    // =============================================================
    // CTA LINKS — centralizados aqui. Uma mudança afeta todos.
    // =============================================================
    const CTA_BASE_URL = 'https://calendar.app.google/y9kQeTfRk1hApJw78';

    const CTA_LINKS = {
      hero: CTA_BASE_URL + '?utm_source=konektlab&utm_medium=landing_page&utm_campaign=hero',
      servicos: CTA_BASE_URL + '?utm_source=konektlab&utm_medium=landing_page&utm_campaign=servicos',
      ctaFinal: CTA_BASE_URL + '?utm_source=konektlab&utm_medium=landing_page&utm_campaign=cta_final',
    };
    ```

    **2. Aplicar links aos CTAs (INTER-01, INTER-03):**
    ```javascript
    // =============================================================
    // APLICAR LINKS AOS CTAs
    // =============================================================
    function initCTALinks() {
      const ctaHero = document.getElementById('cta-hero');
      const ctaServicos = document.getElementById('cta-servicos');
      const ctaFinal = document.getElementById('cta-final-btn');

      if (ctaHero) ctaHero.href = CTA_LINKS.hero;
      if (ctaServicos) ctaServicos.href = CTA_LINKS.servicos;
      if (ctaFinal) ctaFinal.href = CTA_LINKS.ctaFinal;
    }
    ```

    **3. Scroll reveal com IntersectionObserver (INTER-04):**
    ```javascript
    // =============================================================
    // SCROLL REVEAL
    // Adiciona classe .reveal a todos os elementos elegíveis,
    // depois observa sua visibilidade e adiciona .is-visible.
    // =============================================================
    function initScrollReveal() {
      // Elementos que devem revelar no scroll
      const revealSelectors = [
        'section h1',
        'section h2',
        '.subheadline',
        '.body-text',
        '.situacoes li',
        '.por-que p',
        '.sobre-content',
        '.card-servico',
        '.card-evidencia',
        '.custo p',
        '.passos li',
        '.cta-final p',
        '.cta-final .cta-btn',
      ];

      const elements = document.querySelectorAll(revealSelectors.join(', '));

      elements.forEach((el, index) => {
        el.classList.add('reveal');
        // Stagger leve para elementos no mesmo grupo
        el.style.transitionDelay = `${(index % 4) * 60}ms`;
      });

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add('is-visible');
              observer.unobserve(entry.target); // Anima uma vez só
            }
          });
        },
        {
          threshold: 0.1,        // 10% do elemento visível dispara
          rootMargin: '0px 0px -40px 0px', // 40px antes da borda inferior
        }
      );

      elements.forEach((el) => observer.observe(el));

      // Verificar elementos já visíveis ao carregar
      setTimeout(() => {
        elements.forEach((el) => {
          const rect = el.getBoundingClientRect();
          if (rect.top < window.innerHeight) {
            el.classList.add('is-visible');
            observer.unobserve(el);
          }
        });
      }, 100);
    }
    ```

    **4. Smooth scroll para âncoras (INTER-06):**
    ```javascript
    // =============================================================
    // SMOOTH SCROLL
    // Compatibilidade extra além do CSS scroll-behavior.
    // =============================================================
    function initSmoothScroll() {
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener('click', function (e) {
          const targetId = this.getAttribute('href');
          if (targetId === '#') return; // CTAs externos, não âncoras internas
          const target = document.querySelector(targetId);
          if (target) {
            e.preventDefault();
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });
    }
    ```

    **5. Init — executar quando DOM estiver pronto:**
    ```javascript
    // =============================================================
    // INIT
    // =============================================================
    document.addEventListener('DOMContentLoaded', function () {
      initCTALinks();
      initScrollReveal();
      initSmoothScroll();

      console.log('[konekt.lab] JS initialized');
    });
    ```

    **Regras críticas:**
    - NÃO usar jQuery, NÃO usar qualquer biblioteca externa
    - O IntersectionObserver é suportado em todos os browsers modernos — sem polyfill necessário
  </action>
  <verify>
    1. Abrir index.html no browser
    2. Abrir DevTools > Console: deve mostrar "[konekt.lab] JS initialized" sem erros
    3. Clicar no botão CTA hero: deve abrir nova aba com URL contendo "utm_campaign=hero"
    4. Clicar no botão CTA serviços: deve abrir nova aba com URL contendo "utm_campaign=servicos"
    5. Clicar no botão CTA final: deve abrir nova aba com URL contendo "utm_campaign=cta_final"
    6. Fazer scroll: elementos devem aparecer com fade-in suave
    7. Verificar no console: nenhum erro de JavaScript
  </verify>
  <done>Três CTAs abrem URL correta com UTM por posição (hero, servicos, cta_final). Scroll reveal funciona sem flashes. Console sem erros. Nenhuma dependência externa.</done>
</task>

</tasks>

<verification>
1. DevTools console: "[konekt.lab] JS initialized" presente, zero erros
2. Clicar CTA hero: URL tem "utm_campaign=hero" e "calendar.app.google"
3. Clicar CTA serviços: URL tem "utm_campaign=servicos"
4. Clicar CTA final: URL tem "utm_campaign=cta_final"
5. Scroll lento: cada seção revela com fade-in suave
6. Elementos do hero (visible sem scroll) já aparecem sem precisar rolar
7. Hover nos cards de serviço: translateY(-2px) visível
8. `grep "CTA_BASE_URL" js/main.js` retorna linha com o link
9. `grep "cta-servicos" js/main.js` retorna linha com o wiring
</verification>

<success_criteria>
- js/main.js tem CTA_BASE_URL como variável central
- CTAs com UTM diferente por posição (hero, servicos e cta_final)
- Scroll reveal com IntersectionObserver sem bibliotecas externas
- Animação de 0.5s ease, sem travar, revelar uma vez só por elemento
- Cards de serviço e evidência com visual correto (DESIGN-04, DESIGN-05)
- Zero erros no console do browser
</success_criteria>

<output>
Após conclusão, criar `.planning/phases/01-implementacao/01-03-SUMMARY.md` documentando:
- IDs dos CTAs usados no JS
- URL base e UTMs configurados
- Seletores usados no scroll reveal
- Qualquer ajuste feito no index.html para corrigir containers
</output>
